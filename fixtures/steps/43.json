{ "name" : "test_subworkflow", "version" : "2.0", "author" : "Qore Technologies, sro", "steptype" : "SUBWORKFLOW", "stepfunction_instanceid" : 59, "arraytype" : "NONE", "created" : "2012-12-16 17:06:15.000000 +01:00", "stepid" : 43, "typedesc" : "SUBWORKFLOW", "functions" : [ { "type" : "primary", "name" : "test_subworkflow", "version" : "2.0", "function_instanceid" : 59, "function_type" : "SUBWORKFLOW", "description" : "subworkflow test function", "author" : "Qore Technologies, sro", "body" : "sub test_subworkflow() {\n    # if \"fast-exec\" is set, or a 10% chance of skipping the subworkflow\n    if (getOption(\"fast-exec\") || getOption(\"skip-subworkflow\") || !(rand() % 10)) {\n\tskipSubWorkflow();\n\treturn;\n    }\n\n    # 20% chance of an error\n    if (!getOption(\"no-errors\") && !(rand() % 5)) {\n\tserror(\"TEST-ERROR\");\n\treturn;\n    }\n    \n    my $h.name = \"SIMPLETEST\";\n    $h.version = \"1.0\";\n\n    # create workflow data\n    my $key = sprintf(\"%s-%d\", getStepInfo().name, \n\t\t      getWorkflowInstanceData(\"workflow_instanceid\"));\n\n    my $data.external_order_instanceid = $key;\n    $data.staticdata = (\n        \"simpledata-key1\" : rand() % 20,\n        \"simpledata-key2\" : \"this is key2\",\n        \"a-random-number\" : rand(),\n        );\n\n    my $r = bindSubWorkflow($h, $data);\n\n    log(LL_INFO, \"subworkflow created, workflow_instance_id=%d\", $r.workflow_instanceid);\n}\n", "created" : "2012-12-16 17:06:13.000000 +01:00", "modified" : "2014-10-06 09:41:36.000000 +02:00", "createdby" : "omq", "modifiedby" : "omq", "tags" : {  }, "source" : "/export/home/dnichols/src/Qorus/svn/trunk/test/TEST-WORKFLOWS/test-functions-v1.0.qfd", "offset" : "195", "host" : "manatee.prague.qoretechnologies.com", "user" : "<shell-unknown>" } ], "description" : "subworkflow test function" }