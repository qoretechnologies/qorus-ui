<div id="canvas-wrapper">
<canvas id="canvas"></canvas>
<div id="canvas-container" class="canvas">
  <% _.each(obj.steps, function (steps, idx1) { %>
    <div class="level">
      <% _.each(steps, function (step, idx2) { %>
        <% var status = 'ok';
           if (step.type === 'start' && order.workflowstatus === 'ERROR') status = 'error';
           if (step.type !== 'start' && _(order.StepInstances).findWhere({ stepname: step.name, stepstatus: 'ERROR'})) status = 'error';
        %>
        <div class="box <%= step.type %> <%= status %>" id="ds-<%= step.id %>" data-id="<%= step.id %>" data-links="<%= step.links_to.join(',')%>"><a href="#"><%= step.name || step.id %></a></div>
      <% }) %>
    </div>
  <% }) %>
</div>
</div>