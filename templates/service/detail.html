<% var orig_item = obj.item; %>
<% var item = obj.item.toJSON(); %>
<h3><%= item.name %> <small><%= item.version %></small> <span class="label <%= status_label[item.status] %>"><%= item.status %></span></h3>
<ul class="nav nav-tabs">
    <li class="active"><a href="#info">Info</a></li>
    <li><a href="#methods">Methods</a></li>
    <% if (item.lib) { %>
    <li><a href="#lib">Library</a></li>
    <% } %>
    <% if (item.groups) { %>
    <li><a href="#groups">Groups</a></li>
    <% } %>
    <li><a href="#log" class="log">Log</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="info">
        <p><%= item.description %></p>
        <p>Type: <%= item.type %></p>
        <p>Autostart: <%= powerButton(item.autostart, { option: 'autostart', on: 'true', off: 'false', id: item.id }) %></p>
        <p>Actions: 
			<div class="btn-group">
	            <% _.each(orig_item.actions(), function(action) { %>
	              <button class="btn btn-mini <%= (action_css[action]) ? action_css[action] : '' %>" data-id="<%= item.id %>" data-msg="<%= action %>ing..." data-action="<%= action %>"><%= action.toUpperCase() %></button>
	            <% }); %>
			</div>
		</p>
    </div>
    <div class="tab-pane" id="methods">
        <table class="table table-striped">
            <thead>
                <th class="name">Name</th>
                <th class="name">Description</th>
                <th>Lock</th>
                <th>Internal</th>
                <th>Write</th>
                <th></th>
            </thead>
            <tbody>
            <% _.each(item.methods, function (method) { %>
                <tr>
                    <td class="name"><%= method.name %></td>
                    <td class="name"><%= method.description %></td>
                    <td><%= statusIcon(method.locked) %></td>
                    <td><%= statusIcon(method.internal) %></td>
                    <td><%= statusIcon(method.write) %></td>
                    <td><button class="btn btn-mini btn-success" data-methodname="<%= method.name %>" data-serviceid="<%= item.id %>" data-id="<%= method.service_methodid %>" data-action="execute">Execute</button></td>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
    <% if (item.lib) { %>
        <div class="tab-pane" id="lib">
            <%= createNestedList(item.lib) %>
        </div>
    <% } %>
    <% if (item.groups) { %>
        <div class="tab-pane" id="groups">
            <% _.each(item.groups, function (g) { %>
                <span class="label"><%= g %></span>
            <% }) %>
        </div>
    <% } %>
    <div class="tab-pane" id="log">
      <textarea disabled class="log span12"></textarea>
    </div>
</div>